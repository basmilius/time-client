!function(){"use strict";class t{static t(...t){}static i(...t){}}function i(t,i=document){return[].slice.call(i.s(t))}class s{get e(){return Et.e}get x(){return Et.x}get name(){return this.n}get h(){return Et.h}constructor(){this.n=this.constructor.name}async r(){t.t(`Initializing manager: ${this.name}`)}a(){}}let e=null;function x(t){t.o=!0}function n(t,i){return i(t),t}const h="https://cdn.mili.us/time/assets/clothing",r=`${h}/lib`,a={},o={},c={},l={},u={c:{l:"./resource/image/avatar/poof/1-1.png",u:"./resource/image/avatar/poof/1-2.png",d:"./resource/image/avatar/poof/1-3.png",p:"./resource/image/avatar/poof/1-4.png",f:"./resource/image/avatar/poof/2-1.png",g:"./resource/image/avatar/poof/2-2.png",w:"./resource/image/avatar/poof/2-3.png",I:"./resource/image/avatar/poof/2-4.png",v:"./resource/image/avatar/poof/3-1.png",y:"./resource/image/avatar/poof/3-2.png",m:"./resource/image/avatar/poof/3-3.png",b:"./resource/image/avatar/poof/3-4.png",P:"./resource/image/avatar/poof/4-1.png",X:"./resource/image/avatar/poof/4-2.png",k:"./resource/image/avatar/poof/4-3.png",$:"./resource/image/avatar/poof/4-4.png"}};let d=null,p=null,f=null,g=(t,i)=>i.M("z")-t.M("z");function w(t){const i=["std"];switch(t){case"bd":i.push("sit","lay","wlk");break;case"hd":i.push("lsp","lay","spk");break;case"fa":i.push("lsp","lay");break;case"ea":i.push("lay");break;case"ey":i.push("agr","sad","sml","srp","lag","lsp","lay","eyb");break;case"fc":i.push("agr","blw","sad","spk","srp","sml","lsp","lay");break;case"hr":case"hrb":case"he":i.push("lay");break;case"ha":i.push("spk","lay");break;case"ch":case"cc":case"ca":i.push("lay");break;case"lg":i.push("sit","wlk","lay");break;case"lh":i.push("respect","sig","wav","wlk","lay");break;case"ls":case"lc":i.push("wlk","wav","lay");break;case"rh":i.push("drk","crr","wlk","lay","blw");break;case"rs":case"rc":i.push("drk","crr","wlk","lay");break;case"ri":i.push("crr","drk");break;case"li":i.push("sig");break;case"sh":i.push("sit","wlk","lay")}return i}function I(t){return void 0!==o[t]}function v(i,s){return new Promise(e=>{const x=function(t){return`${h}/${t}.xml`}(i),n=s instanceof Rt;n?(s.add(x)._("complete",()=>void 0!==Et.S(x)?a[i]=Et.S(x).z:void 0),e()):(t.t(`Loading avatar clothing config: ${i}`),s.add(x)._("complete",()=>{a[i]=Et.S(x).z,n||e(a[i])}).L())})}function y(i,s){return void 0!==l[i]?l[i]:I(i)?Promise.resolve(o[i]):l[i]=new Promise(e=>{const x=function(t){return`${r}/${t}.json`}(i);s instanceof Rt?(s.add(x)._("complete",()=>void 0!==Et.S(x,s)?o[i]=Et.S(x,s).z:void 0),e()):(t.t(`Loading avatar clothing library: ${i}`),s.add(x)._("complete",()=>{l[i]=void 0,o[i]=Et.S(x,s).z,e(o[i])}).L())})}function m(t){const i=b().T(`action[id="${t}"]`),s={};if(null!==i)return i.A.forEach(t=>s[t.name]=t.O),s}function b(){return a.j}function P(){return a.q}function X(){return a.R}function k(){return a.G}function $(){return a.D}function M(){return a.W}function _(t,i,s={B:0,H:0}){if(void 0===o[t]||void 0===o[t][i])return null;const e=new PIXI.N(function(t,i){return void 0===o[t]||void 0===o[t][i]?null:void 0!==c[`${t}:${i}`]?c[`${t}:${i}`]:c[`${t}:${i}`]=PIXI.F.C("data:image/png;base64,"+o[t][i].U)}(t,i));return e.B=s.B-(o[t][i].Y.B+s.B-12),e.H=s.H-(o[t][i].Y.H-s.H/2-6),e}function S(t){let i=M().T(`partSet part[set-type="${t}"]`).M("flipped-set-type");return null!==i&&""!==i?i:t}function z(t){let i=M().T(`partSet part[set-type="${t}"]`).M("remove-set-type");return null!==i&&""!==i?i:null}function L(t){const i=[];return M().s(`activePartSet[id="${t}"] activePart`).forEach(t=>i.push(t.M("set-type"))),i}function T(t,i){const s=[];return P().s(`action[id="${t}"] part[set-type="${i}"] frame`).forEach(t=>{const i=t.Z("repeats")?parseInt(t.M("repeats")):1;for(let e=0;e<i;e++)s.push({J:parseInt(t.M("number")),K:t.M("assetpartdefinition")})}),s}function A(t){const i=P().s(`action[id="${t}"] part:first-child frame`).length,s=P().s(`action[id="${t}"] offsets frame`).length;return Math.max(i,s)}function O(t,i,s,e){if(isNaN(s)||isNaN(e))return{B:0,H:0};const x=P().T(`action[id="${t}"] offsets frame[id="${s}"] directions direction[id="${e}"] bodypart[id="${i}"]`);return null===x?{B:0,H:0}:{B:parseInt(x.M("dx")),H:parseInt(x.M("dy"))}}class j{get Q(){return this.V}constructor(t){this.V={},this.parse(t)}tt(t,i){return!!this.it(t)&&this.V[t].st===i}it(t){return void 0!==this.V[t]}parse(t){(t=(t=(t=t.split(".")).map(t=>t.split("-"))).sort((t,i)=>t[0].localeCompare(i[0]))).forEach(t=>this.V[t[0]]={st:parseInt(t[1]),et:[t[2],t[3]].filter(t=>null!==t)})}toString(){const t=[];return this.Q.forEach((i,s)=>t.push([s,i.st,...i.et].join("-"))),t.join(".")}}class q extends PIXI.xt{get j(){return this.nt}get ht(){return this.rt}set ht(t){this.rt=t}get at(){return this.ot}set at(t){this.ot=t}get ct(){return this.lt}set ct(t){void 0!==t&&(this.lt=new j(t),this.c())}get D(){return this.ut}set D(t){this.ut=t}get dt(){return this.pt}set dt(t){this.pt=t}constructor(t="lg-3116-110-92.hr-3163-61.sh-3275-92.hd-195-4.ha-3268-1415-92.ch-255-92",i="vertical",s="full"){super(),x(this),this.ft=!0,this.gt=-1,this.x=new PIXI.It.wt,this.vt=new PIXI.xt,this.yt(this.vt),this.mt=[],this.bt=!0,this.Pt=!1,this.Xt=0,this.kt=0,this.nt=[p],this.$t={},this.ht=s,this.at=2,this.ct=t,this.D=i,this.dt=this.at,this.bt=!1,this.Mt()}_t(t){for(let i of this.nt)if(i.st===t)return;void 0!==(t=m(t))&&(this.nt.St(t).sort((t,i)=>d.indexOf(i.st)-d.indexOf(t.st)),this.$t[t.st]=0,"true"===t.zt&&(this.pt=this.at))}Lt(t){let i=!1;for(let s of this.nt)s.st===t&&(i=!0);return i}Tt(t){this.Lt(t)&&(this.nt=this.nt.filter(i=>i.st!==t).sort((t,i)=>d.indexOf(i.st)-d.indexOf(t.st)))}At(t,i,s=3){return this.B=t,this.H=i,this.at=s,this.dt=s,this}async Ot(){if(!0===this.bt)return;this.jt("avatar-build",this),this.gt=Et.Rt.qt,this.Et(),this.Gt(),this.Dt();const t=this.Wt();for(let i of t)I(i)||await y(i,this.x);this.Bt=!1,this.Ht()}Mt(){this.Ot().then()}Gt(){const t=$().T(`canvas[scale="h"] geometry[id="${this.D}"]`);this.kt=parseInt(t.M("height")),this.Xt=parseInt(t.M("width")),"head"===this.D&&(this.kt=this.Xt)}Nt(t=null){let i=[];return null===t?i.push(...L("figure")):i.push(...L(t.Ct)),i.Ft()}Ut(t){for(let i of this.j)if(i.Ct===t)return!0;return!1}Yt(){const t=[];return i(`avatarset[id="${this.ht}"] bodypart`,$()).forEach(i=>t.push(i.M("id"))),t}Wt(){const t=[];return this.V.forEach((i,s)=>{i.Q.forEach(i=>{let e=a.Zt.T(`part[id="${i.st}"][type="${s}"]`);null!==e&&null!==e.Jt&&(e=e.Jt,t.push(i.Kt=e.M("id").toLowerCase()))})}),t.Ft()}Qt(){return{B:-this.Xt/2,H:-104}}Dt(){this.ct.Q.forEach((t,i)=>{const s=k().T(`sets > settype[type="${i}"]`);if(null===s)return;const e=s.T(`set[id="${t.st}"]`),x=e.Vt("part"),n="1"===e.M("colorable"),h=[],r=s.M("paletteid"),a=e.s("hiddenlayers layer");null!==a&&a.forEach(t=>h.push(t.M("parttype"))),x.forEach(t=>{const s=t.M("type");void 0===this.V[s]&&(this.V[s]={ti:h,Q:[]}),this.V[s].Q.push({st:parseInt(t.M("id")),ii:"1"===t.M("colorable")&&n,si:parseInt(t.M("colorindex")),ei:parseInt(t.M("index")),xi:r,set:i,ni:s})})})}Et(){this.Bt=!0,this.V={},this.hi={},this.Gt()}c(){if(this.bt||!this.ft)return;const t=[{ri:new PIXI.oi.ai([Et.S(u.c["l"]).ci,Et.S(u.c["u"]).ci,Et.S(u.c["d"]).ci,Et.S(u.c["p"]).ci]),B:-4,H:-36},{ri:new PIXI.oi.ai([Et.S(u.c["f"]).ci,Et.S(u.c["g"]).ci,Et.S(u.c["w"]).ci,Et.S(u.c["I"]).ci]),B:4,H:36},{ri:new PIXI.oi.ai([Et.S(u.c["v"]).ci,Et.S(u.c["y"]).ci,Et.S(u.c["m"]).ci,Et.S(u.c["b"]).ci]),B:-4,H:16},{ri:new PIXI.oi.ai([Et.S(u.c["v"]).ci,Et.S(u.c["y"]).ci,Et.S(u.c["m"]).ci,Et.S(u.c["b"]).ci]),B:4,H:-16}];let i=this.Xt/2,s=this.kt/2,e=x=>{this.yt(x.ri),x.ri.anchor.set(.5),x.ri.li=.2,x.ri.ui=!1,x.ri.di=null,x.ri.pi.B=i+x.B,x.ri.pi.H=s+x.H,x.ri.fi(),setTimeout(()=>this.gi(x.ri),330),void 0!==t[0]&&setTimeout(()=>e(t.shift()),45)};e(t.shift())}wi(){if(this.Bt){const t=new PIXI.vi.Ii;t.yi=.8,this.vi=[t]}else this.vi=[];let t="std";this.Ut("handLeft")?t=this.at>3&&this.at<7?"rh-up":"lh-up":this.Ut("handRightAndHead")&&(t=this.at>3&&this.at<7?"lh-up":"rh-up");let s=i(`action[id="${t}"] direction[id="${this.at}"] partList part`,X()).map(t=>t.M("set-type"));for(0===s.length&&(s=i(`action[id="std"] direction[id="${this.at}"] partList part`,X()).map(t=>t.M("set-type")));this.vt.mi[0];)this.vt.gi(this.vt.mi[0]);for(let t of s)void 0!==this.hi[t]&&this.hi[t].forEach(t=>this.vt.yt(t));!1===this.Pt&&(this.Pt=!0,Et.Rt.add(()=>{(-1===this.gt||Et.Rt.qt-this.gt>120)&&this.Mt()}))}Ht(){this.j.forEach(t=>this.bi(t)),this.wi()}bi(t=null){if(!0===this.bt)return;const s={B:this.Xt/2,H:this.kt/2},e=this.Nt(t),x=++this.$t[t.st]||0,n=[],h=this.Bt?null!==f?f.V:{}:this.V;h.forEach(t=>n.push(...t.ti));let r=[];this.Yt().forEach(t=>r.push($().T(`type[id="${this.D}"] bodypart[id="${t}"]`)));for(const a of r.sort(g)){let r=a.M("id"),o=i("item",a).sort(g);for(const i of o){let o="head"===r?this.dt:this.at,c=i.M("id"),l=o,u=c,d=!1,p=z(c);null!==p&&n.push(p),o>3&&o<7&&(d=!0,c=S(c));let f=w(c),g=T(t.st,c);if(-1!==e.indexOf(c)&&(void 0===this.hi[u]&&(this.hi[u]={}),!(n.indexOf(c)>-1)&&void 0!==h[u]))for(const i of h[u].Q){if(this.Bt&&"hh_human_body"!==i.Kt)break;let e={B:parseInt(a.M("x")),H:parseInt(a.M("y"))},n=!1,h=x%(null!==g?Object.values(g).length:1),p=g&&g[h]?g[h].K:t.K;-1===f.indexOf(p)&&(p=f[0]),o="head"===r?this.dt:this.at,h=g&&g[h]?g[h].J:0;let w=O(t.st,r,x%A(t.st),o),I=()=>`h_${p}_${c}_${i.st}_${o}_${h}`,v=_(i.Kt,I(),s);if(null===v){let t=h;h=0,v=_(i.Kt,I(),s),h=t}if(null===v&&(o=6-o,n=l>3&&l<7,v=_(i.Kt,I(),s)),null===v){let t=p;p="std",v=_(i.Kt,I(),s),p=t}if(null===v)break;if(d?(v.B-=e.B+w.B,v.H-=e.H+w.H):(v.B+=e.B+w.B,v.H+=e.H+w.H),n&&(v.Pi.B=-1,v.B=this.Xt-v.Xi-v.B+v.Xi+w.B),v.B=Math.floor(v.B),v.H=Math.floor(v.H),i.ii&&"ey"!==c&&!this.Bt){const t=this.ct.Q[i.set].et,s=t[i.si-1]||t[0],e=k().T(`palette[id="${i.xi}"] color[id="${s}"]`);null!==e&&(v.ki=parseInt(`0x${e.$i}`))}void 0!==this.hi[u][i.ei]&&this.hi[u][i.ei].Mi(!1),this.hi[u][i.ei]=v}}}}}class R extends s{constructor(){super()}async r(){await super.r(),await y("hh_human_body",this.x),await v("actions",this.x),await v("animations",this.x),await v("draworder",this.x),await v("effectmap",this.x),await v("figuredata",this.x),await v("figuremap",this.x),await v("geometry",this.x),await v("offsets",this.x),await v("partsets",this.x),u.c.forEach(t=>this.x.add(t))}}function E(t,i={}){return t=t.replace(new RegExp("\\${(.*?)}","g"),(t,s)=>G(s,i))}function G(t,i,s){const e=t.split(".");let x=i;for(const t of e){if(void 0===x[t])return s;x=x[t]}return x}const D="./resource/config/config.json";class W extends s{constructor(){super(),this._i={}}async r(){await super.r(),this.x.add(D,0)._("complete",()=>this.Si(Et.S(D)))}zi(t,i={},s){let e=G(t,this._i);return void 0===e&&void 0!==s?s:E(e,Object.assign({},i,this._i))}Si(t){void 0!==t&&(this._i=t.z)}}const B="./resource/config/texts.json";class H extends s{constructor(){super(),this.Li={}}async r(){await super.r(),this.x.add(B,0)._("complete",()=>this.Ti(Et.S(B)))}zi(t,i={},s){let e=G(t,this.Li);return void 0===e&&void 0!==s?s:E(e,Object.assign({},i,this.Ai,Et.Oi(W)._i))}Ti(t){void 0!==t&&(this.Li=t.z)}}const N="/resource/image/logo.png";class C extends PIXI.ji{constructor(){super(),this.qi=8947848,this.Ri=12,this.Ei=2,this.Gi=300,this.Di=0,Et.e.Rt.add(t=>this.Wi(t))}Wi(){this.clear(),this.Bi(this.qi),this.Hi(0,0,Math.round(this.Di/100*this.Gi),this.Ri),this.Ni(),this.Ci(this.Ei,this.qi),this.Fi(-this.Ei,-this.Ei),this.Ui(this.Gi+this.Ei,-this.Ei),this.Ui(this.Gi+this.Ei,this.Ri+this.Ei),this.Ui(-this.Ei,this.Ri+this.Ei),this.Ui(-this.Ei,-this.Ei)}}class F extends PIXI.ji{get Di(){return this.Yi.Di||0}set Di(t){this.Yi.Di=Math.round(t)}constructor(){super(),this.x=new PIXI.It.wt,this.Yi=new C,this.Zi=null,this.Ji(),this.Ki(),Et.e.Rt.add(t=>this.Wi(t))}Ji(){const t=new PIXI.Qi({Vi:"center",ts:"Segoe UI",ss:13,fill:"white",es:!0,xs:360});this.Ai=new PIXI.ns("",t)}Ki(){this.x.add(N).L(()=>this.hs())}hs(){this.Zi=new PIXI.N(Et.S(N,this.x).ci),this.yt(this.Zi),this.yt(this.Yi),this.yt(this.Ai),this.jt("loader-ready"),Et.x._("progress",t=>this.Di=t.rs)}Wi(){const t=this.Di;this.clear();const i=Et.e.as,s=Et.e.Xi;this.Bi(0),this.Hi(0,0,s,i),this.Ni(),this.Yi.pi.B=Math.round(s/2-this.Yi.Xi/2),this.Yi.pi.H=i-(this.Yi.as+91),null!==this.Zi&&(this.Zi.B=Math.round(s/2-this.Zi.Xi/2),this.Zi.H=Math.round(i/2-this.Zi.as/2)),this.Ai.Ai=Et.Oi(H).zi("loading-view.starting-up",{Di:t},""),this.Ai.pi.set(Math.floor(s/2-this.Ai.Xi/2),this.Yi.pi.H-30)}}let U=0;const Y="main#stage-mount";class Z extends PIXI.cs.os{get ls(){return U}get us(){return this.ds.us}get h(){return this.ds.h}get Rt(){return this.ds.Rt}get ps(){return this.ds.ps}get as(){return this.us.as/this.fs}get Xi(){return this.us.Xi/this.fs}constructor(){if(super(),this.fs=1,this.gs=document.T(Y),null===this.gs)throw new Error("Display mount not found!");this.gs.ws="",this.Is(),this.vs(),this.Rt.add(()=>U++)}Is(){this.ds=new PIXI.ys({as:window.ms/this.fs,Xi:window.bs/this.fs,Ps:!1,Xs:!1,ks:this.fs,$s:!1}),this.gs.Ms(this.ps)}vs(){window._s("resize",()=>this.Ss())}Ss(){this.us.zs(window.bs/this.fs,window.ms/this.fs),this.jt("resize")}}const J=0,K=54;class Q extends PIXI.ji{constructor(){super(),this.Ls(),Et.e._("resize",()=>this.Ls())}Ls(){this.clear(),this.Bi(2367772),this.Hi(0,0,Et.e.Xi,K),this.Ni(),this.Bi(2565407),this.Hi(0,0,Et.e.Xi,6),this.Ni(),this.Bi(2104601),this.Hi(0,K-6,Et.e.Xi,6),this.Ni(),this.Bi(3354923),this.Hi(0,K,Et.e.Xi,3),this.Ni()}}const V=60,tt=Math.floor(V/2);class it extends PIXI.xt{get Ts(){return this.As}get Os(){return this.js}constructor(){super(),this.qs=new PIXI.ji,this.qs.Rs=!0,this.qs.o=!0,this.qs._("pointerover",()=>this.Es()),this.qs._("pointerout",()=>this.Gs()),this.As=new q("","vertical","head"),this.Ts.ft=!1,this.Ts.dt=3,this.Ts.pi.B=-15,this.Ts.pi.H=-11,this.Ts.Ht(),this.qs.yt(this.Ts),this.js=new st,this.Os.pi.B=V+8,this.Os.pi.H=8,this.Os._("pointerover",()=>this.Ds()),this.Os._("pointerout",()=>this.Ws()),this.yt(this.qs),this.yt(this.Os),this.Ls(),Et.e._("resize",()=>this.Ls()),setTimeout(()=>this.Ts._t("GestureSmile"),500)}Ls(){this.pi.B=16,this.pi.H=Et.e.as-(V+16),this.qs.clear(),this.qs.Bi(0,.25),this.qs.Bs(tt,tt+2,tt+2),this.qs.Ni(),this.qs.Bi(801381),this.qs.Ci(4,2379124),this.qs.Bs(tt,tt,tt),this.qs.Ni()}Es(){this.Ts.Tt("GestureSmile"),this.Ts._t("GestureSurprised")}Gs(){this.Ts.Tt("GestureSurprised"),this.Ts._t("GestureSmile")}Ds(){this.Ts.Tt("GestureSmile"),this.Ts._t("Talk")}Ws(){this.Ts.Tt("Talk"),this.Ts._t("GestureSmile")}}class st extends PIXI.ji{constructor(){super(),this.o=!0,this.Hs=new PIXI.N(Et.S(et.Os.Ns).ci),this.Cs=new PIXI.oi.Fs(Et.S(et.Os.Us).ci),this.Ys=new PIXI.N(Et.S(et.Os.Zs).ci),this.Hs.as=44,this.Cs.as=44,this.Ys.as=44,this.yt(this.Hs),this.yt(this.Cs),this.yt(this.Ys),this.Ls()}Ls(){this.Hs.pi.B=0,this.Hs.pi.H=0,this.Cs.pi.B=17,this.Cs.pi.H=0,this.Cs.Xi=100,this.Ys.pi.B=117,this.Ys.pi.H=0}}const et={Os:{Ns:"./resource/image/interface/chat-bubble/left.png",Us:"./resource/image/interface/chat-bubble/middle.png",Zs:"./resource/image/interface/chat-bubble/right.png"}};class xt extends PIXI.xt{get Js(){return this.Ks}get Qs(){return this.Vs}constructor(){super(),this.Ks=new it,this.Vs=new Q,this.yt(this.Js),this.yt(this.Qs),this.Js.Ts.ct="hr-3163-61.cc-3075-73.ca-3175-92.hd-195-3.ch-3030-92.sh-3016-64.lg-3116-110-92"}}class nt extends s{constructor(){super()}async r(){await super.r(),this.x.add(et.Os.Ns),this.x.add(et.Os.Us),this.x.add(et.Os.Zs)}}const ht=5e3,rt=32,at=rt/2,ot=64,ct=ot/2;let lt=[];const ut={te:0,ie:1,se:2,ee:3};function dt(t,i,s){t.Bi(10000485),t.Ci(1,9342558),t.Fi(i[0].B,i[0].H),t.Ui(i[1].B,i[1].H),t.Ui(i[2].B,i[2].H),t.Ui(i[3].B,i[3].H),t.Ni(),s>0&&(t.Bi(8618839),t.Ci(.5,8026705),t.Fi(i[1].B,i[1].H),t.Ui(i[1].B,i[1].H+s),t.Ui(i[2].B,i[2].H+s),t.Ui(i[2].B,i[2].H),t.Ni(),t.Bi(7302985),t.Ci(.5,6776644),t.Fi(i[3].B,i[3].H),t.Ui(i[3].B,i[3].H+s),t.Ui(i[2].B,i[2].H+s),t.Ui(i[2].B,i[2].H),t.Ni())}function pt(t,i,s){return wt(t,i,s)?[ut.te,ut.ie,ut.se,ut.ee][ft(t,i,s).findIndex(t=>null!==t)]:null}function ft(t,i,s){return[gt(t,i-1,s),gt(t,i,s-1),gt(t,i,s+1),gt(t,i+1,s)]}function gt(t,i,s){return void 0===t[i]?null:void 0===t[i][s]?null:t[i][s]}function wt(t,i,s){return null!==gt(t,i,s)&&1===ft(t,i,s).filter(t=>null!==t).length}function It(t,i,s){if(wt(t,i,s))return!1;let e=i;for(;e>0;)if(null!==gt(t,--e,s)&&!wt(t,i,e))return!1;return!(null!==gt(t,i-1,s-1)&&!wt(t,i-1,s-1)||null!==gt(t,i-1,s+1)&&!wt(t,i-1,s+1))}function vt(t,i,s){if(wt(t,i,s))return!1;let e=s;for(;e>0;)if(null!==gt(t,i,--e)&&!wt(t,i,e))return!1;return!(null!==gt(t,i-1,s-1)&&!wt(t,i-1,s-1)||null!==gt(t,i+1,s-1)&&!wt(t,i+1,s-1))}lt.push("\nxxxxx\nx000x\n0000x\nx000x\nx000x\nx000x\nxxxxx\n"),lt.push("\nxxxxx\nx110x\nx110x\nx000x\nxxxxx\n"),lt.push("\nxxxxxxxxxxxxxxxxxxx\nxxxxxxxxxxx22222222\nxxxxxxxxxxx22222222\nxxxxxxxxxxx22222222\nxxxxxxxxxxx22222222\nxxxxxxxxxxx22222222\nxxxxxxxxxxx22222222\nx222222222222222222\nx222222222222222222\nx222222222222222222\nx222222222222222222\nx222222222222222222\nx222222222222222222\nx2222xxxxxxxxxxxxxx\nx2222xxxxxxxxxxxxxx\nx2222211111xx000000\nx222221111110000000\nx222221111110000000\nx2222211111xx000000\nxx22xxx1111xxxxxxxx\nxx11xxx1111xxxxxxxx\nx1111xx1111xx000000\nx1111xx111110000000\nx1111xx111110000000\nx1111xx1111xx000000\nxxxxxxxxxxxxxxxxxxx\n"),lt.push("\nxxxxxxxxxxxxxxxxxxxxxx\nx22222222222222222222x\nx22222222222222222222x\nx22222222222222222222x\nx22222222222222222222x\nx22222222222222222222x\nx22222222222222222222x\nx22222222222222222222x\nx000x11xxxxxxxx11x000x\nx00000000000000000000x\nx00000000000000000000x\nx00000000000000000000x\nx00000000000000000000x\nx00000000000000000000x\nx00000000000000000000x\nx00000000000000000000x\nx00000000000000000000x\nx00000000000000000000x\nxxxxxxxxxxxxxxxxxxxxxx\n"),lt.push("\nxxxxxxxxxxxxxxxxxxx\nxxxxxxx222222222222\nxxxxxxx222222222222\nxxxxxxx222222222222\nxxxxxxx222222222222\nxxxxxxx222222222222\nxxxxxxx222222222222\nxxxxxxx222222222222\nxxxxxxx111111111111\nx222221111111111111\nx222221111111111111\nx222221111111111111\nx222221111111111111\nx222221111111111111\nx222221111111111111\nx222221111111111111\nx222221111111111111\nx2222xx111111111111\nx2222xx000000000000\nx2222xx000000000000\nx2222xx000000000000\nx2222xx000000000000\nx2222xx000000000000\n22222xx000000000000\nx2222xx000000000000\nxxxxxxxxxxxxxxxxxxx\n"),lt.push("\nxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx\nx222222222x000000000000000000000000xxxx\nx222222222x000000000000000000000000xxxx\nx222222222x000000000000000000000000xxxx\nx222222222x000000000000000000000000xxxx\nx222222222x000000000000000000000000xxxx\nx222222222x000000000000000000000000xxxx\nx222222222x000000000000000000000000xxxx\nx222222222x000000000000000000000000xxxx\nx222222222x00000000xxxxxxxx00000000xxxx\nx11xxxxxxxx00000000xxxxxxxx00000000xxxx\nx00x000000000000000xxxxxxxx00000000xxxx\nx00x000000000000000xxxxxxxx00000000xxxx\nx000000000000000000xxxxxxxx00000000xxxx\nx000000000000000000xxxxxxxx00000000xxxx\n0000000000000000000xxxxxxxx00000000xxxx\nx000000000000000000xxxxxxxx00000000xxxx\nx00x000000000000000xxxxxxxx00000000xxxx\nx00x000000000000000xxxxxxxx00000000xxxx\nx00xxxxxxxxxxxxxxxxxxxxxxxx00000000xxxx\nx00xxxxxxxxxxxxxxxxxxxxxxxx00000000xxxx\nx00x0000000000000000000000000000000xxxx\nx00x0000000000000000000000000000000xxxx\nx0000000000000000000000000000000000xxxx\nx0000000000000000000000000000000000xxxx\nx0000000000000000000000000000000000xxxx\nx0000000000000000000000000000000000xxxx\nx00x0000000000000000000000000000000xxxx\nx00x0000000000000000000000000000000xxxx\nxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx\nxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx\nxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx\n");class yt extends PIXI.ji{get xe(){return this.ne}get he(){return this.re}get ae(){return this.Pi.B}set ae(t){this.Pi.B=t,this.Pi.H=t}get oe(){return this.ce}constructor(){super(),this.ne=[],this.re={},this.ce={},this.le=0,this.ue=0,this.de={B:0,H:0},function(t){x(t);let i=null,s=null;t._("pointerdown",function(x){i=x.z,e=t,s=i.pe(e)}),t._("pointerup",function(){i=null,s=null,e=null}),t._("pointermove",function(){if(null===e)return;const t=i.pe(e.fe);e.pi.B=t.B-s.B,e.pi.H=t.H-s.H})}(this),this.ge(lt[5]),this.ae=1,this.we=new $t,Et.Rt.add(()=>this.Wi())}ge(t){this.jt("room-view-emptied");const i=this.re=t.trim().split("\n").map(t=>t.split("").map(t=>(t=t,"x"===t?null:["1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"].indexOf(t))));var s;for(this.clear();this.mi[0];)this.gi(this.mi[0]);if(this.ne=[],this.ce={},0!==i.length){this.le=i[0].length,this.ue=i.length;for(let t=0;t<i.length;t++){this.ce[t]={};for(let s=0;s<i[t].length;s++){let e=this.Ie(t,s);if(null===e)continue;let x,h,r,a,o=zt;[x,h,r,a]=ft(i,t,s);wt(i,t,s)&&pt(i,t,s);let c=It(i,t,s),l=vt(i,t,s),u=c||l;null!==r&&null!==a&&1===Math.abs(e-r)&&1===Math.abs(e-a)?o=Mt:null!==r&&1===Math.abs(e-r)?o=_t:null!==a&&1===Math.abs(e-a)&&(o=St);let d=this.ve(t,s),p=this.ye(t,s),f=this.me(t,s);if(u){let e=[],x=wt(i,t-1,s),h=wt(i,t,s-1);c&&l?(e.push(new Pt),e.push(new bt(x)),e.push(new Xt(h))):c?e.push(new bt(x)):l&&e.push(new Xt(h));for(const i of e)this.yt(n(i,i=>{this.xe.push(i),i.B=d+ct,i.H=p,i.be=x||h?this.me(t+1,s):f-1}))}this.yt(n(new o,i=>{this.xe.push(i),this.ce[t][s]=i,i.Pe=t,i.Xe=s,i._("tile-click",t=>this.ke(t)),i._("tile-hover",t=>this.$e(t)),i._("tile-leave",t=>this.Me(t)),i.B=d,i.H=p,i.be=f}))}}if(this.xe.length>0){let t=this.xe.reduce((t,i)=>t.B<i.B?t:i).B,i=this.xe.filter(t=>t instanceof kt).reduce((t,i)=>t.H<i.H?t:i).H;this.de.B=-t,this.de.H=-i,this.xe.forEach(s=>{s.B-=t,s.H-=i})}this.pi.B=Math.floor(Et.e.Xi/2-this.Xi/2),this.pi.H=Math.floor(Et.e.as/2-(this.as/2-115)),this.di=new PIXI._e(-ht,-ht,this.Xi+2*ht,this.as+2*ht),this.jt("room-view-ready")}}Se(t,i,s){let e=this.ze(t,i,s);t.pi.B=e.B,t.pi.H=e.H,t.be=e.be}Le(t,i=!0){let s=Et.e.Xi/2,e=Et.e.as/2;s-=Math.round(t.B+t.Xi/2),e-=Math.round(t.H+t.as/2),s-=s%2,i?anime({Te:this,B:s,H:e,Ae:800,Oe:"easeInOutSine"}):anime({Te:this,B:s,H:e,Ae:45,Oe:"linear"})}ze(t,i,s){let e={B:0,H:0},x=this.je(i,s);return void 0!==t.Qt&&(e=t.Qt()),{B:this.ve(i,s)+ct+(e.B+this.de.B),H:this.ye(i,s)+at+(e.H+this.de.H)+(!x||x instanceof zt?0:at/2),be:this.me(i,s,5)}}je(t,i){if(void 0!==this.oe[t])return this.oe[t][i]||void 0}Ie(t,i){if(void 0!==this.he[t])return this.he[t][i]}ve(t,i){return(i-t)*ct}ye(t,i){let s=this.Ie(t,i);return void 0===s&&(s=0),(i+t)*at-s*ct}me(t,i,s=0){return i*=1e3,(t*=1e3)*this.le+i+s}Wi(){this.qe()}ke(t){this.jt("tile-click",t)}$e(t){this.yt(this.we),this.we.Re(t.Pe,t.Xe,t.B,t.H,this.me(t.Pe,t.Xe,1),t.Ee)}Me(t){this.gi(this.we)}}class mt extends PIXI.ji{constructor(){super(),this.o=!0,this.Ge=85,this.De=8,this.We=115,this.Be=8}}class bt extends mt{constructor(t){super();let i=t?this.Ge:0;t||(this.Bi(9869217),this.Fi(ct,at+this.De),this.Ui(ct+this.Be,at+this.De-this.Be/2),this.Ui(ct+this.Be,at-this.Be/2-this.We),this.Ui(ct,at-this.We),this.Ui(ct,at+this.De),this.Ni()),this.Bi(11909577),this.Fi(ct,at+this.De-i),this.Ui(ct,at-this.We),this.Ui(0,at-this.We-at),this.Ui(0,this.De-i),this.Ui(ct,at+this.De-i),this.Ni(),this.Bi(7434875),this.Fi(ct,at-this.We),this.Ui(0,at-this.We-at),this.Ui(this.Be,at-this.We-at-this.Be/2),this.Ui(ct+this.Be,at-this.We-this.Be/2),this.Ui(ct,at-this.We),this.Ni()}}class Pt extends mt{constructor(){super(),this.Bi(7434875),this.Fi(0,-this.We),this.Ui(this.Be,-this.We-this.Be/2),this.Ui(0,-this.We-this.Be),this.Ui(-this.Be,-this.We-this.Be/2),this.Ui(0,-this.We),this.Ni()}}class Xt extends mt{constructor(t){super();let i=t?this.Ge:0;t||(this.Bi(12238542),this.Fi(-ct,at+this.De),this.Ui(-ct,at-this.We),this.Ui(-ct-this.Be,at-this.We-this.Be/2),this.Ui(-ct-this.Be,at+this.De-this.Be/2),this.Ui(-ct,at+this.De),this.Ni()),this.Bi(9606045),this.Fi(-ct,at+this.De-i),this.Ui(-ct,at-this.We),this.Ui(0,at-this.We-at),this.Ui(0,this.De-i),this.Ui(-ct,at+this.De-i),this.Ni(),this.Bi(7434875),this.Fi(-ct,at-this.We),this.Ui(0,at-this.We-at),this.Ui(-this.Be,at-this.We-at-this.Be/2),this.Ui(-ct-this.Be,at-this.We-this.Be/2),this.Ui(-ct,at-this.We),this.Ni()}}class kt extends PIXI.ji{constructor(){super(),this.Pe=0,this.Xe=0,this.o=!0,this.He=8,this._("click",()=>this.Ne()),this._("pointerover",()=>this.Ce()),this._("pointerout",()=>this.Fe())}Ne(){this.jt("tile-click",{Pe:this.Pe,Xe:this.Xe,B:this.B,H:this.H,be:this.be,Xi:this.Xi,as:this.as,Ee:this})}Ce(){this.jt("tile-hover",{Pe:this.Pe,Xe:this.Xe,B:this.B,H:this.H,be:this.be,Xi:this.Xi,as:this.as,Ee:this})}Fe(){this.jt("tile-leave",{Pe:this.Pe,Xe:this.Xe,B:this.B,H:this.H,Xi:this.Xi,as:this.as,Ee:this})}}class $t extends PIXI.ji{constructor(){super();const t=[new PIXI.Ue(ot/2,0),new PIXI.Ue(ot,rt/2),new PIXI.Ue(ot/2,rt),new PIXI.Ue(0,rt/2)];this.Ci(4,16777215),this.Fi(t[0].B,t[0].H-1),this.Ui(t[1].B,t[1].H-1),this.Ui(t[2].B,t[2].H-1),this.Ui(t[3].B,t[3].H-1),this.Ui(t[0].B,t[0].H-1),this.Ni(),this.vi=[n(new PIXI.vi.Ye,t=>{t.et=0,t.yi=.2,t.Ze=0,t.Je=1,t.Ke=90})]}Re(t,i,s,e,x,n){let h=s,r=e;n instanceof zt||(r+=at),this.pi.B=h,this.pi.H=r-2,this.be=x}}class Mt extends kt{constructor(){super()}}class _t extends kt{constructor(){super();const t=[];for(let i=0;i<4;i++){let s=8*i,e=12*i;const x=[new PIXI.Ue(ot/2+s,e),new PIXI.Ue(ot/2+ot/8+s,rt/8+e),new PIXI.Ue(ot/2-24+s,20+e),new PIXI.Ue(s,rt/2+e)];t.push(...x),dt(this,x,this.He)}}}class St extends kt{constructor(){super();for(let t=0;t<4;t++){let i=-8*t,s=12*t;dt(this,[new PIXI.Ue(ot/2+i,s),new PIXI.Ue(ot+i,rt/2+s),new PIXI.Ue(ot/2+24+i,20+s),new PIXI.Ue(ot/2-ot/8+i,rt/8+s)],this.He)}}}class zt extends kt{constructor(){super(),dt(this,[new PIXI.Ue(ot/2,0),new PIXI.Ue(ot,rt/2),new PIXI.Ue(ot/2,rt),new PIXI.Ue(0,rt/2)],this.He)}}const Lt=["hr-3163-61.cc-3075-73.ca-3175-92.hd-195-3.ch-3030-92.sh-3016-64.lg-3116-110-92","lg-3116-110-92.hr-3163-61.sh-3275-92.hd-195-4.ha-3268-1415-92.ch-255-92","hr-3012-44.hd-605-2.ch-3439-92-66.lg-3006-100-92.sh-725-92.he-3329-1412-100.ca-3414-1412.cc-3542-97-97","hr-3012-1407.hd-600-3.ch-3013-93.lg-3006-110-1408.sh-725-92.he-1603-1328.cc-3390-110-106","hr-834-34.hd-600-2.ch-3013-1330.lg-710-92.sh-730-1408.ha-3620.he-3579.ca-1815-1324","hr-3012-1405.hd-600-1390.ch-3636-1324.lg-3418-110.sh-725-92.ea-3169-110.cc-3289-110","hr-3012-61.hd-600-1370.ch-3399-92-1409.lg-3006-1409-92.sh-3064-89.ha-3586"],Tt=()=>Lt[Math.floor(Math.random()*Lt.length)],At=async(t,i,s,e,x,n)=>{let h=Math.max(Math.abs(s-x),Math.abs(e-n)),r=t.ze(i,x,n);i._t("Move");let a=0;x<s&&n>e?a=1:x===s&&n>e?a=2:x>s&&n>e?a=3:x>s&&n===e?a=4:x>s&&n<e?a=5:x===s&&n<e?a=6:x<s&&n<e&&(a=7),i.at=i.dt=a,i.be=Math.max(t.me(x,n,5),t.me(s,e,5));let o=anime({Te:i,Ae:360*h,B:r.B,H:r.H,Oe:"linear"});return await o.Qe,s=x,e=n,i.be=r.be,i.Tt("Move"),t.Le(i),{Ve:s,tx:e,Ts:i}},Ot={ix:"./resource/image/furni/loading.png"};class jt extends PIXI.xt{get ix(){return this.Bt}set ix(t){this.Bt=t}constructor(t){super(),this.sx=t,this.ex=new PIXI.N(Et.S(Ot.ix).ci),this.yt(this.ex),this.ix=!0,this.wi()}Qt(){return{B:-(ct+2),H:-(at+34)}}wi(){}}class qt extends s{constructor(){super()}async r(){await super.r(),this.x.add(Ot.ix)}}class Rt extends PIXI.It.wt{constructor(){super(),this.xx=[]}add(t,i=1){return this.xx.push({h:i,nx:t}),this}L(){t.t("InitializerLoader","Skipped load() initializing..")}hx(t,i=1){this.xx.filter(t=>t.h===i).map(t=>t.nx).forEach(t=>super.add(t)),super.L(t)}}const Et=new class extends PIXI.cs.os{get e(){return this.rx}get x(){return this.ax}get h(){return this.e.h}get Rt(){return this.e.Rt}constructor(){super(),this.rx=new Z,this.ax=new Rt,this.ox=[]}cx(){this.lx(new W),this.lx(new H),this.lx(new R),this.lx(new qt),this.lx(new nt)}lx(i){t.t("Application",`Added manager ${i.constructor.name}`),this.ox.push(i)}Oi(t){return this.ox.find(i=>i instanceof t)}create(){this.ux=new F,this.ux._("loader-ready",()=>this.jt("application-can-run")),this.h.yt(this.ux),this.cx()}async r(){await this.ox.forEach(async t=>await t.r())}async dx(){this.ux.Yi.yi=0,setTimeout(()=>this.x.hx(()=>this.px(),0),J)}px(){this.ux.Yi.yi=1,this.ux.Di=0,this.x.hx(()=>this.fx(),1)}fx(){t.t("Application","Loading of manager data done!"),this.jt("application-loading-done"),delete this.x,this.h.gi(this.ux),null===d&&(d=i("action",b()).map(t=>t.M("id"))),null===p&&(p=m("Default")),null===f&&(f=new q("hd-195-1"));let s=[void 0,void 0],e=[void 0],x=new yt;this.h.yt(x),this.h.yt(new xt),x.yt(s[0]=new q(Tt(),"vertical","full")),x.yt(s[1]=new q(Tt(),"vertical","full")),x.yt(e[0]=new jt("throne")),x.Se(s[0],15,0),x.Se(s[1],9,20),x.Se(e[0],9,21);let n={Ve:15,tx:0,Ts:s[0]};s[0]._("click",()=>s[0].ct=Tt()),s[0]._("click",()=>x.Le(s[0])),s[1]._t("Wave"),s[1]._("click",()=>s[1].ct=Tt()),s[1]._("click",()=>x.Le(s[1])),x.Le(s[0]),x._("tile-click",t=>s[0].gx("avatar-build",async()=>n=await At(x,n.Ts,n.Ve,n.tx,t.Pe,t.Xe)))}S(t,i){return(i||this.x).wx[t]}Ix(t){return(t||this.x).wx}};exports.vx=!0,exports.x=exports.yx=exports.mx=exports.bx=exports.It=exports.Px=exports.vi=exports.oi=exports.Xx=exports.kx=void 0;var Gt=require("./polyfill");Object.keys(Gt).forEach(function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(exports,t,{$x:!0,get:function(){return Gt[t]}})});var Dt=require("./core");Object.keys(Dt).forEach(function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(exports,t,{$x:!0,get:function(){return Dt[t]}})});var Wt,Bt=require("./deprecation"),Ht=(Wt=Bt)&&Wt.vx?Wt:{Mx:Wt},Nt=Vt(require("./accessibility")),Ct=Vt(require("./extract")),Ft=Vt(require("./extras")),Ut=Vt(require("./filters")),Yt=Vt(require("./interaction")),Zt=Vt(require("./loaders")),Jt=Vt(require("./mesh")),Kt=Vt(require("./particles")),Qt=Vt(require("./prepare"));function Vt(t){if(t&&t.vx)return t;var i={};if(null!=t)for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(i[s]=t[s]);return i.Mx=t,i}Dt.cs.Sx._x();var ti=Zt.zx||null;exports.kx=Nt,exports.Xx=Ct,exports.oi=Ft,exports.vi=Ut,exports.Px=Yt,exports.It=Zt,exports.bx=Jt,exports.mx=Kt,exports.yx=Qt,exports.x=ti,"function"==typeof Ht.Mx&&(0,Ht.Mx)(exports),global.Lx=exports,Array.prototype.St=function(...t){return this.push(...t),this},Array.prototype.Ft=function(){return this.filter((t,i,s)=>s.indexOf(t)===i)},Object.prototype.forEach=function(t){for(let i in this)this.hasOwnProperty(i)&&t(this[i],i)},PIXI.xt.prototype.qe=function(){this.mi.sort(function(t,i){return t.be=t.be||0,i.be=i.be||0,t.be-i.be})},class{static async Ji(){t.t("Bootstrapper","Loading everything.."),PIXI.Ax.Tx=PIXI.jx.Ox,Et.create(),Et._("application-can-run",()=>Et.dx()),await Et.r()}}.Ji().then(()=>{})}();
//# sourceMappingURL=bundle.js.map
